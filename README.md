# Lang-Monitor ğŸ”

è‡ªåŠ¨ç›‘æ§ GitHub ä»“åº“ä¸­ç¿»è¯‘æ–‡ä»¶çš„æ›´æ–°ï¼Œå¹¶é€šè¿‡é‚®ä»¶å‘é€é€šçŸ¥ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“ **æ‰¹é‡ç›‘æ§**: åŒæ—¶ç›‘æ§å¤šä¸ªä»“åº“ä¸­çš„å¤šä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹
- ğŸ¯ **çµæ´»é…ç½®**: æ”¯æŒç²¾ç¡®è·¯å¾„ã€é€šé…ç¬¦ã€æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
- ğŸ“ **æ¨¡æ¿ç³»ç»Ÿ**: é¢„å®šä¹‰æ¨¡æ¿ï¼Œç®€åŒ–é‡å¤é…ç½®
- ğŸ”” **é‚®ä»¶é€šçŸ¥**: æ£€æµ‹åˆ°æ›´æ–°æ—¶è‡ªåŠ¨å‘é€ç¾è§‚çš„ HTML é‚®ä»¶
- â° **å®šæ—¶æ£€æŸ¥**: é€šè¿‡ GitHub Actions å®šæ—¶è‡ªåŠ¨è¿è¡Œ
- ğŸ”— **ä¾¿æ·é“¾æ¥**: é‚®ä»¶ä¸­åŒ…å«æ–‡ä»¶å¯¹æ¯”ã€æäº¤è¯¦æƒ…ç­‰å¿«æ·é“¾æ¥
- ğŸ’¾ **æ— ç—•è¿è¡Œ**: ä½¿ç”¨ Cache å­˜å‚¨çŠ¶æ€ï¼Œä¸äº§ç”Ÿå¤šä½™çš„ commit
- ğŸ†“ **å®Œå…¨å…è´¹**: åˆ©ç”¨ GitHub Actions å…è´¹é¢åº¦è¿è¡Œ

## ğŸ“ é¡¹ç›®ç»“æ„

```
Lang-Monitor/
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ check-updates.yml    # GitHub Actions å·¥ä½œæµ
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ monitors.json        # ç›‘æ§é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ monitors.example.json # é…ç½®ç¤ºä¾‹ï¼ˆå«è¯¦ç»†è¯´æ˜ï¼‰
â”œâ”€â”€ data/
â”‚   â””â”€â”€ state.json           # çŠ¶æ€æ¨¡æ¿ï¼ˆå®é™…çŠ¶æ€å­˜å‚¨åœ¨ Cache ä¸­ï¼‰
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ check_updates.py     # æ ¸å¿ƒæ£€æŸ¥è„šæœ¬
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. Fork æœ¬ä»“åº“

ç‚¹å‡»å³ä¸Šè§’çš„ Fork æŒ‰é’®ï¼Œå°†æœ¬ä»“åº“å¤åˆ¶åˆ°ä½ çš„è´¦å·ä¸‹ã€‚

### 2. é…ç½®ç›‘æ§ç›®æ ‡

ç¼–è¾‘ `config/monitors.json` æ–‡ä»¶ï¼ˆå®Œæ•´ç¤ºä¾‹è§ `monitors.example.json`ï¼‰ï¼š

```json
{
  "defaults": {
    "branch": "main",
    "enabled": true
  },
  "templates": {
    "minecraft_mod_lang": {
      "paths": ["src/main/resources/assets/{modid}/lang/en_us.json"]
    }
  },
  "monitors": [
    {
      "name": "æˆ‘çš„æ¨¡ç»„ç¿»è¯‘",
      "repo": "SomeAuthor/SomeMod",
      "template": "minecraft_mod_lang",
      "vars": { "modid": "mymod" }
    }
  ],
  "settings": {
    "email_subject_prefix": "[Lang-Monitor]",
    "email_sender_name": "Lang-Monitor"
  }
}
```

#### é…ç½®è¯´æ˜

##### åŸºç¡€å­—æ®µ

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `name` | ç›‘æ§é¡¹åç§° | `"Minecraftæ¨¡ç»„ç¿»è¯‘"` |
| `repo` | ä»“åº“è·¯å¾„ | `"owner/repo"` |
| `branch` | ç›‘æ§çš„åˆ†æ”¯ | `"main"` |
| `enabled` | æ˜¯å¦å¯ç”¨ | `true` / `false` |

##### è·¯å¾„é…ç½®ï¼ˆæ”¯æŒä¸‰ç§æ–¹å¼ï¼Œå¯æ··åˆä½¿ç”¨ï¼‰

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `paths` | ç²¾ç¡®è·¯å¾„ | `["lang/en_us.json"]` |
| `paths_glob` | é€šé…ç¬¦è·¯å¾„ | `["**/lang/en_us.json"]` |
| `paths_regex` | æ­£åˆ™è¡¨è¾¾å¼ | `[".*\\/lang\\/en_us\\.json$"]` |

##### é€šé…ç¬¦è¯­æ³•ï¼ˆglobï¼‰

| ç¬¦å· | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `*` | åŒ¹é…ä»»æ„å­—ç¬¦ï¼ˆä¸å« `/`ï¼‰ | `lang/*.json` |
| `**` | åŒ¹é…ä»»æ„æ·±åº¦è·¯å¾„ | `**/en_us.json` |
| `?` | åŒ¹é…å•ä¸ªå­—ç¬¦ | `lang/en_??.json` |

##### é«˜çº§é…ç½®

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `defaults` | å…¨å±€é»˜è®¤å€¼ | `{"branch": "main"}` |
| `templates` | å¯å¤ç”¨æ¨¡æ¿ | è§ä¸‹æ–¹è¯´æ˜ |
| `template` | å¼•ç”¨æ¨¡æ¿å | `"minecraft_mod_lang"` |
| `vars` | æ¨¡æ¿å˜é‡ | `{"modid": "mymod"}` |
| `batch` | æ‰¹é‡é…ç½®å¤šä»“åº“ | è§ç¤ºä¾‹æ–‡ä»¶ |

##### æ¨¡æ¿ä½¿ç”¨ç¤ºä¾‹

```json
{
  "templates": {
    "minecraft_mod_lang": {
      "paths": ["src/main/resources/assets/{modid}/lang/en_us.json"]
    }
  },
  "monitors": [
    {
      "name": "AE2",
      "repo": "AppliedEnergistics/Applied-Energistics-2",
      "template": "minecraft_mod_lang",
      "vars": { "modid": "ae2" }
    },
    {
      "name": "Create",
      "repo": "Creators-of-Create/Create",
      "template": "minecraft_mod_lang",
      "vars": { "modid": "create" }
    }
  ]
}
```

##### æ‰¹é‡é…ç½®ç¤ºä¾‹

```json
{
  "batch": [
    {
      "repos": [
        "FTBTeam/FTB-Stuff-Things",
        "FTBTeam/FTB-Pack-Companion"
      ],
      "branch": "main",
      "paths_glob": ["**/lang/en_us.json"]
    }
  ]
}
```

### 3. é…ç½®é‚®ä»¶é€šçŸ¥

åœ¨ä»“åº“ **Settings â†’ Secrets and variables â†’ Actions** ä¸­æ·»åŠ ï¼š

| Secret | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `EMAIL_SMTP_SERVER` | SMTP æœåŠ¡å™¨ | `smtp.qq.com` |
| `EMAIL_SMTP_PORT` | ç«¯å£ | `587` æˆ– `465` |
| `EMAIL_USERNAME` | å‘ä»¶é‚®ç®± | `your@qq.com` |
| `EMAIL_PASSWORD` | æˆæƒç /å¯†ç  | `xxxxxxxx` |
| `EMAIL_TO` | æ”¶ä»¶é‚®ç®± | `notify@example.com` |

<details>
<summary>ğŸ“§ å¸¸ç”¨é‚®ç®±é…ç½®</summary>

**QQ é‚®ç®±**
- æœåŠ¡å™¨: `smtp.qq.com`ï¼Œç«¯å£: `587` æˆ– `465`
- éœ€å¼€å¯ SMTP å¹¶è·å–æˆæƒç 

**Gmail**
- æœåŠ¡å™¨: `smtp.gmail.com`ï¼Œç«¯å£: `587` æˆ– `465`
- éœ€ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç 

**163 é‚®ç®±**
- æœåŠ¡å™¨: `smtp.163.com`ï¼Œç«¯å£: `465`
- éœ€å¼€å¯ SMTP å¹¶è·å–æˆæƒç 

**Outlook**
- æœåŠ¡å™¨: `smtp-mail.outlook.com`ï¼Œç«¯å£: `587`

</details>

### 4. å¯ç”¨ Actions

1. è¿›å…¥ä»“åº“çš„ **Actions** æ ‡ç­¾é¡µ
2. ç‚¹å‡» "I understand my workflows, go ahead and enable them"
3. å·¥ä½œæµå°†æ¯ 6 å°æ—¶è‡ªåŠ¨è¿è¡Œä¸€æ¬¡

### 5. æ‰‹åŠ¨æµ‹è¯•

1. è¿›å…¥ **Actions** â†’ é€‰æ‹©å·¥ä½œæµ
2. ç‚¹å‡» **Run workflow**
3. é¦–æ¬¡è¿è¡Œä¼šè®°å½•å½“å‰çŠ¶æ€ï¼Œåç»­æ£€æµ‹åˆ°å˜æ›´æ‰ä¼šå‘é€é€šçŸ¥

## ğŸ“§ é‚®ä»¶æ•ˆæœ

é‚®ä»¶é‡‡ç”¨ç°ä»£åŒ–è®¾è®¡ï¼ŒåŒ…å«ï¼š
- ğŸ“Š æ›´æ–°ç»Ÿè®¡ï¼ˆä»“åº“æ•°/æ–‡ä»¶æ•°ï¼‰
- ğŸ“¦ æŒ‰ä»“åº“åˆ†ç»„çš„æ›´æ–°è¯¦æƒ…
- ğŸ’¬ æäº¤ä¿¡æ¯
- ğŸ”— ä¸€é”®è·³è½¬æŒ‰é’®ï¼ˆå¯¹æ¯”/æäº¤/æ–‡ä»¶ï¼‰

## âš™ï¸ é«˜çº§é…ç½®

### ä¿®æ”¹æ£€æŸ¥é¢‘ç‡

ç¼–è¾‘ `.github/workflows/check-updates.yml`ï¼š

```yaml
schedule:
  - cron: '0 */6 * * *'  # æ¯6å°æ—¶ï¼ˆé»˜è®¤ï¼‰
  - cron: '0 * * * *'    # æ¯å°æ—¶
  - cron: '0 8 * * *'    # æ¯å¤©8ç‚¹(UTC)
```

### é‡ç½®ç›‘æ§çŠ¶æ€

æ‰‹åŠ¨è§¦å‘å·¥ä½œæµæ—¶å‹¾é€‰ **"é‡ç½®çŠ¶æ€"** é€‰é¡¹ï¼Œå¯æ¸…é™¤å†å²è®°å½•é‡æ–°å¼€å§‹ç›‘æ§ã€‚

### è‡ªå®šä¹‰å‘ä»¶äººåç§°

```json
{
  "settings": {
    "email_sender_name": "æˆ‘çš„ç¿»è¯‘ç›‘æ§"
  }
}
```

## ğŸ”§ æ•…éšœæ’é™¤

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| API è¯·æ±‚é™åˆ¶ | GitHub Actions è‡ªåŠ¨æä¾› Tokenï¼Œé€šå¸¸ä¸ä¼šè§¦å‘ |
| é‚®ä»¶å‘é€å¤±è´¥ | æ£€æŸ¥ Secrets é…ç½®ã€SMTP å¼€å¯çŠ¶æ€ã€æˆæƒç æ˜¯å¦æ­£ç¡® |
| é‚®ä»¶è¿›åƒåœ¾ç®± | å°†å‘ä»¶åœ°å€æ·»åŠ åˆ°ç™½åå• |
| é¦–æ¬¡æ— é‚®ä»¶ | æ­£å¸¸ç°è±¡ï¼Œé¦–æ¬¡è¿è¡Œåªè®°å½•çŠ¶æ€ |

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
